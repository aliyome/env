CLAUDE.md という名前にすると、実際に読み込まれてしまうので、敢えてファイル名に `_template` をつけています。
以下はよく使う CLAUDE.md の一部です。 bun + option-t を使うプロジェクトで有効です。

## Basic Rules

- TypeScript の実行環境として Bun を使用する
- t-wada が推奨する TDD で開発する
- 各ステップの最後に lint, test, commit を行う
- 明示的なユーザーの承認なしに lint ルールを無効にしない
- コミットメッセージは Conventional Commit 形式に従い、日本語で書く

## Coding Rules

- 関数型ドメインモデリングで設計する
  - **`class` は使わない。** `function` を使う
  - 代数的データ型を使う
- 例外を Throw しない
  - 失敗する可能性のある関数は `option-t` を使って `Result<T, E>` を返す
  - 外部ライブラリ等で throw される例外は `try catch` と `option-t` の `createErr` を使ってラップする
  - `isOk()`, `isErr()` を利用する。 `mapForResult()`, `andThenForResult()` をなるべく利用しない
- 早期リターンを使用して可読性を向上させる
- `Result<T, E>` 型のテストでは、エラーケースで `throw new Error("unreachable")` を使用する
- コメントとテストケースは日本語で書く

## Single Responsibility and API Minimization

- 責務ごとにファイルを分割し、各ファイルが単一の責務を持つようにする
- 公開 API は最小限に保ち、実装の詳細は隠蔽する
  - 最小限の関数や型のみ export する
- モジュールの境界と依存関係を最小限に抑える

## Backend Development

- Domain Driven Design
- ディレクトリ構造は packaging by feature
- 高階関数による DI

## 【MUST】Gemini・o3 活用

### 三位一体 の開発原則

ユーザーの**意思決定**、Claude(あなた) の**分析と実行**、Gemini と o3 の**検証と助言**を組み合わせ、開発の質と速度を最大化する：

- **ユーザー**：プロジェクトの目的・要件・最終ゴールを定義し、最終的な意思決定を行う**意思決定者**
  - 反面、具体的なコーディングや詳細な計画を立てる力、タスク管理能力ははありません。
- **Claude(あなた)**：高度な計画力・高品質な実装・リファクタリング・ファイル操作・タスク管理を担う**実行者**
  - 指示に対して忠実に、順序立てて実行する能力はありますが、意志がなく、思い込みは勘違いも多く、思考力は少し劣ります。
- **Gemini**：深いコード理解・Web 検索 (Google 検索) による最新情報へのアクセス・多角的な視点からの助言・技術的検証を行う**助言者**
  - プロジェクトのコードと、インターネット上の膨大な情報を整理し、的確な助言を与えてくれますが、実行力はありません。
- **o3**: Web 検索による最新情報へのアクセス・コーディングに限らない汎用知識・高度な推論を行う**助言者 (その 2)**
  - 汎用的な知識と、高度な推論力を有しますが、プロジェクトのコードにアクセスできないため、プロジェクトについての前提知識などが抜けています。

### 実践ガイド

- **ユーザーの要求を受けたら即座に Gemini に壁打ち**を必ず実施
  - Gemini の場合は`echo <質問内容> | gemini`コマンドで壁打ち。
- **ユーザーの要求を受けたら即座に askrepo に壁打ち**を必ず実施
  - askrepo の場合は`askrepo <質問内容>`コマンドで壁打ち。
- Gemini と o3 の意見を鵜呑みにせず、1 意見として判断。聞き方を変えて多角的な意見を抽出
